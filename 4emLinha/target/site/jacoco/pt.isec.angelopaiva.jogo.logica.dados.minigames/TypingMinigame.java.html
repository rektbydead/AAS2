<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>TypingMinigame.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">4-em-linha</a> &gt; <a href="index.source.html" class="el_package">pt.isec.angelopaiva.jogo.logica.dados.minigames</a> &gt; <span class="el_source">TypingMinigame.java</span></div><h1>TypingMinigame.java</h1><pre class="source lang-java linenums">package pt.isec.angelopaiva.jogo.logica.dados.minigames;

import java.io.File;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.Scanner;
import java.util.StringTokenizer;
import java.util.concurrent.ThreadLocalRandom;

public class TypingMinigame extends MinigameAdapter {
    private static final int NR_QUESTIONS = 5;

    ArrayList&lt;String&gt; wordList;
    String[] solutions;

    String answer;

<span class="nc" id="L18">    public TypingMinigame() {</span>
<span class="nc" id="L19">        solutions = new String[NR_QUESTIONS];</span>
<span class="nc" id="L20">        wordList = new ArrayList&lt;&gt;();</span>

        try {
<span class="nc bnc" id="L23" title="All 2 branches missed.">            if (!prepareWordList()) {</span>
<span class="nc" id="L24">                useDefaultWordList();</span>
            }
<span class="nc" id="L26">        } catch (FileNotFoundException e) {</span>
<span class="nc" id="L27">            e.printStackTrace();</span>
<span class="nc" id="L28">        }</span>

<span class="nc" id="L30">        startTimer();</span>
<span class="nc" id="L31">    }</span>

    @Override
    public String getQuestion() {
<span class="nc" id="L35">        StringBuilder questions = new StringBuilder();</span>
<span class="nc" id="L36">        int maxSeconds = 0;</span>

<span class="nc bnc" id="L38" title="All 2 branches missed.">        for (int i = 0; i &lt; solutions.length; i++) {</span>
<span class="nc" id="L39">            solutions[i] = getRandomWord();</span>

<span class="nc" id="L41">            maxSeconds += solutions[i].length() + 1; // + 1 because of the extra &quot; &quot;</span>

<span class="nc" id="L43">            questions.append(solutions[i]).append(&quot; &quot;);</span>
        }

<span class="nc" id="L46">        super.setMaxSeconds(maxSeconds / 2);</span>

<span class="nc" id="L48">        return questions.toString();</span>
    }

    @Override
    public void setAnswer(String answer) {
<span class="nc" id="L53">        finished = true;</span>
<span class="nc" id="L54">        stopTimer();</span>
<span class="nc" id="L55">        this.answer = answer;</span>
<span class="nc" id="L56">    }</span>

    @Override
<span class="nc" id="L59">    public String getWording() { return &quot;Escreva as palavras exatamente como são apresentadas&quot;; }</span>

    @Override
    public boolean hasWon() {
<span class="nc bnc" id="L63" title="All 4 branches missed.">        if (answer == null || answer.isBlank()) return false;</span>

<span class="nc" id="L65">        StringTokenizer st = new StringTokenizer(answer);</span>

<span class="nc bnc" id="L67" title="All 6 branches missed.">        for (String solution : solutions) if (st.hasMoreTokens() &amp;&amp; !solution.equals(st.nextToken())) return false;</span>

<span class="nc" id="L69">        return super.hasWon();</span>
    }

    private boolean prepareWordList() throws FileNotFoundException {
<span class="nc" id="L73">        final String FILE_PATH = &quot;5PlusWordList-PT.txt&quot;;</span>

<span class="nc" id="L75">        File file = new File(FILE_PATH);</span>
<span class="nc bnc" id="L76" title="All 2 branches missed.">        if (!file.exists()) return false;</span>

<span class="nc" id="L78">        Scanner sc = new Scanner(file);</span>

<span class="nc bnc" id="L80" title="All 2 branches missed.">        while (sc.hasNextLine()) wordList.add(sc.nextLine());</span>

<span class="nc" id="L82">        sc.close();</span>
<span class="nc" id="L83">        return true;</span>
    }

<span class="nc" id="L86">    private String getRandomWord() { return wordList.get(ThreadLocalRandom.current().nextInt(wordList.size())); }</span>

    public void useDefaultWordList() {
<span class="nc" id="L89">        wordList.add(&quot;preto&quot;);</span>
<span class="nc" id="L90">        wordList.add(&quot;negro&quot;);</span>
<span class="nc" id="L91">        wordList.add(&quot;prima&quot;);</span>
<span class="nc" id="L92">        wordList.add(&quot;primo&quot;);</span>
<span class="nc" id="L93">        wordList.add(&quot;gelado&quot;);</span>
<span class="nc" id="L94">        wordList.add(&quot;música&quot;);</span>
<span class="nc" id="L95">        wordList.add(&quot;curso&quot;);</span>
<span class="nc" id="L96">        wordList.add(&quot;informático&quot;);</span>
<span class="nc" id="L97">        wordList.add(&quot;tabela&quot;);</span>
<span class="nc" id="L98">        wordList.add(&quot;programador&quot;);</span>
<span class="nc" id="L99">        wordList.add(&quot;perdido&quot;);</span>
<span class="nc" id="L100">        wordList.add(&quot;parede&quot;);</span>
<span class="nc" id="L101">        wordList.add(&quot;casota&quot;);</span>
<span class="nc" id="L102">        wordList.add(&quot;minerador&quot;);</span>
<span class="nc" id="L103">        wordList.add(&quot;carro&quot;);</span>
<span class="nc" id="L104">        wordList.add(&quot;carruagem&quot;);</span>
<span class="nc" id="L105">        wordList.add(&quot;autocarro&quot;);</span>
<span class="nc" id="L106">        wordList.add(&quot;comboio&quot;);</span>
<span class="nc" id="L107">        wordList.add(&quot;irineu&quot;);</span>
<span class="nc" id="L108">        wordList.add(&quot;peluche&quot;);</span>
<span class="nc" id="L109">        wordList.add(&quot;boneco&quot;);</span>
<span class="nc" id="L110">        wordList.add(&quot;escrever&quot;);</span>
<span class="nc" id="L111">        wordList.add(&quot;saber&quot;);</span>
<span class="nc" id="L112">        wordList.add(&quot;fazer&quot;);</span>
<span class="nc" id="L113">        wordList.add(&quot;imaginar&quot;);</span>
<span class="nc" id="L114">        wordList.add(&quot;imaginação&quot;);</span>
<span class="nc" id="L115">        wordList.add(&quot;chorar&quot;);</span>
<span class="nc" id="L116">        wordList.add(&quot;paragem&quot;);</span>
<span class="nc" id="L117">        wordList.add(&quot;estrada&quot;);</span>
<span class="nc" id="L118">        wordList.add(&quot;calculador&quot;);</span>
<span class="nc" id="L119">        wordList.add(&quot;teclado&quot;);</span>
<span class="nc" id="L120">        wordList.add(&quot;computador&quot;);</span>
<span class="nc" id="L121">        wordList.add(&quot;portátil&quot;);</span>
<span class="nc" id="L122">        wordList.add(&quot;derretido&quot;);</span>
<span class="nc" id="L123">        wordList.add(&quot;derreter&quot;);</span>
<span class="nc" id="L124">        wordList.add(&quot;água&quot;);</span>
<span class="nc" id="L125">        wordList.add(&quot;garrafa&quot;);</span>
<span class="nc" id="L126">        wordList.add(&quot;brinquedo&quot;);</span>
<span class="nc" id="L127">        wordList.add(&quot;caneta&quot;);</span>
<span class="nc" id="L128">        wordList.add(&quot;lápis&quot;);</span>
<span class="nc" id="L129">        wordList.add(&quot;régua&quot;);</span>
<span class="nc" id="L130">        wordList.add(&quot;fotografia&quot;);</span>
<span class="nc" id="L131">        wordList.add(&quot;moldura&quot;);</span>
<span class="nc" id="L132">        wordList.add(&quot;dormir&quot;);</span>
<span class="nc" id="L133">        wordList.add(&quot;cobertor&quot;);</span>
<span class="nc" id="L134">        wordList.add(&quot;condutor&quot;);</span>
<span class="nc" id="L135">        wordList.add(&quot;conduzir&quot;);</span>
<span class="nc" id="L136">        wordList.add(&quot;cerveja&quot;);</span>
<span class="nc" id="L137">        wordList.add(&quot;vinho&quot;);</span>
<span class="nc" id="L138">        wordList.add(&quot;semáforo&quot;);</span>
<span class="nc" id="L139">        wordList.add(&quot;evento&quot;);</span>
<span class="nc" id="L140">        wordList.add(&quot;prateleira&quot;);</span>
<span class="nc" id="L141">        wordList.add(&quot;armário&quot;);</span>
<span class="nc" id="L142">        wordList.add(&quot;cadeira&quot;);</span>
<span class="nc" id="L143">        wordList.add(&quot;escritório&quot;);</span>
<span class="nc" id="L144">        wordList.add(&quot;telhado&quot;);</span>
<span class="nc" id="L145">        wordList.add(&quot;varanda&quot;);</span>
<span class="nc" id="L146">        wordList.add(&quot;calçada&quot;);</span>
<span class="nc" id="L147">        wordList.add(&quot;mirtilo&quot;);</span>
<span class="nc" id="L148">        wordList.add(&quot;cenoura&quot;);</span>
<span class="nc" id="L149">        wordList.add(&quot;tomate&quot;);</span>
<span class="nc" id="L150">        wordList.add(&quot;alface&quot;);</span>
<span class="nc" id="L151">        wordList.add(&quot;igreja&quot;);</span>
<span class="nc" id="L152">        wordList.add(&quot;pátio&quot;);</span>
<span class="nc" id="L153">        wordList.add(&quot;parque&quot;);</span>
<span class="nc" id="L154">        wordList.add(&quot;festa&quot;);</span>
<span class="nc" id="L155">        wordList.add(&quot;terra&quot;);</span>
<span class="nc" id="L156">        wordList.add(&quot;paralelepípedo&quot;);</span>
<span class="nc" id="L157">        wordList.add(&quot;pirâmide&quot;);</span>
<span class="nc" id="L158">        wordList.add(&quot;retângulo&quot;);</span>
<span class="nc" id="L159">        wordList.add(&quot;hexágono&quot;);</span>
<span class="nc" id="L160">        wordList.add(&quot;pentágono&quot;);</span>
<span class="nc" id="L161">        wordList.add(&quot;aborto&quot;);</span>
<span class="nc" id="L162">        wordList.add(&quot;morte&quot;);</span>
<span class="nc" id="L163">        wordList.add(&quot;desespero&quot;);</span>
<span class="nc" id="L164">        wordList.add(&quot;dignidade&quot;);</span>
<span class="nc" id="L165">        wordList.add(&quot;inteligência&quot;);</span>
<span class="nc" id="L166">        wordList.add(&quot;rápido&quot;);</span>
<span class="nc" id="L167">        wordList.add(&quot;lento&quot;);</span>
<span class="nc" id="L168">        wordList.add(&quot;pássaro&quot;);</span>
<span class="nc" id="L169">        wordList.add(&quot;oxigénio&quot;);</span>
<span class="nc" id="L170">        wordList.add(&quot;carbono&quot;);</span>
<span class="nc" id="L171">        wordList.add(&quot;hidrogénio&quot;);</span>
<span class="nc" id="L172">        wordList.add(&quot;génio&quot;);</span>
<span class="nc" id="L173">        wordList.add(&quot;telemóvel&quot;);</span>
<span class="nc" id="L174">        wordList.add(&quot;telefone&quot;);</span>
<span class="nc" id="L175">        wordList.add(&quot;impressora&quot;);</span>
<span class="nc" id="L176">        wordList.add(&quot;digitalizadora&quot;);</span>
<span class="nc" id="L177">        wordList.add(&quot;caderno&quot;);</span>
<span class="nc" id="L178">        wordList.add(&quot;estojo&quot;);</span>
<span class="nc" id="L179">        wordList.add(&quot;tesoura&quot;);</span>
<span class="nc" id="L180">        wordList.add(&quot;disco&quot;);</span>
<span class="nc" id="L181">        wordList.add(&quot;ficha&quot;);</span>
<span class="nc" id="L182">        wordList.add(&quot;tomada&quot;);</span>
<span class="nc" id="L183">        wordList.add(&quot;coluna&quot;);</span>
<span class="nc" id="L184">        wordList.add(&quot;rádio&quot;);</span>
<span class="nc" id="L185">        wordList.add(&quot;guitarra&quot;);</span>
<span class="nc" id="L186">        wordList.add(&quot;baixo&quot;);</span>
<span class="nc" id="L187">        wordList.add(&quot;piano&quot;);</span>
<span class="nc" id="L188">        wordList.add(&quot;flauta&quot;);</span>
<span class="nc" id="L189">        wordList.add(&quot;globo&quot;);</span>
<span class="nc" id="L190">        wordList.add(&quot;continente&quot;);</span>
<span class="nc" id="L191">        wordList.add(&quot;oceano&quot;);</span>
<span class="nc" id="L192">        wordList.add(&quot;planeta&quot;);</span>
<span class="nc" id="L193">        wordList.add(&quot;galáxia&quot;);</span>
<span class="nc" id="L194">        wordList.add(&quot;universo&quot;);</span>
<span class="nc" id="L195">        wordList.add(&quot;caveira&quot;);</span>
<span class="nc" id="L196">        wordList.add(&quot;caverna&quot;);</span>
<span class="nc" id="L197">        wordList.add(&quot;pedra&quot;);</span>
<span class="nc" id="L198">        wordList.add(&quot;relva&quot;);</span>
<span class="nc" id="L199">        wordList.add(&quot;minério&quot;);</span>
<span class="nc" id="L200">        wordList.add(&quot;tocha&quot;);</span>
<span class="nc" id="L201">        wordList.add(&quot;picareta&quot;);</span>
<span class="nc" id="L202">        wordList.add(&quot;armadura&quot;);</span>
<span class="nc" id="L203">        wordList.add(&quot;defesa&quot;);</span>
<span class="nc" id="L204">        wordList.add(&quot;defender&quot;);</span>
<span class="nc" id="L205">        wordList.add(&quot;óculos&quot;);</span>
<span class="nc" id="L206">        wordList.add(&quot;caixa&quot;);</span>
<span class="nc" id="L207">        wordList.add(&quot;carregador&quot;);</span>
<span class="nc" id="L208">        wordList.add(&quot;gaveta&quot;);</span>
<span class="nc" id="L209">        wordList.add(&quot;papel&quot;);</span>
<span class="nc" id="L210">        wordList.add(&quot;tecla&quot;);</span>
<span class="nc" id="L211">        wordList.add(&quot;televisão&quot;);</span>
<span class="nc" id="L212">        wordList.add(&quot;monitor&quot;);</span>
<span class="nc" id="L213">        wordList.add(&quot;placa&quot;);</span>
<span class="nc" id="L214">        wordList.add(&quot;processador&quot;);</span>
<span class="nc" id="L215">        wordList.add(&quot;aquecedor&quot;);</span>
<span class="nc" id="L216">        wordList.add(&quot;secador&quot;);</span>
<span class="nc" id="L217">        wordList.add(&quot;máquina&quot;);</span>
<span class="nc" id="L218">        wordList.add(&quot;internet&quot;);</span>
<span class="nc" id="L219">        wordList.add(&quot;aparelho&quot;);</span>
<span class="nc" id="L220">        wordList.add(&quot;estátua&quot;);</span>
<span class="nc" id="L221">        wordList.add(&quot;espelho&quot;);</span>
<span class="nc" id="L222">        wordList.add(&quot;escova&quot;);</span>
<span class="nc" id="L223">        wordList.add(&quot;pasta&quot;);</span>
<span class="nc" id="L224">        wordList.add(&quot;dinheiro&quot;);</span>
<span class="nc" id="L225">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.10.202304240956</span></div></body></html>